---
title: System
path: system
icon: mdi:cogs
background: center / cover no-repeat url("/local/backgrounds/clear-blur.jpg")
cards:
  # - type: custom:vertical-stack-in-card
  - type: vertical-stack
    cards:
      - type: entities
        title: System Status
        show_header_toggle: false
        entities:
          - sensor.date
          - sensor.time
          - type: section
          - sensor.version_current
          - sensor.version_available
          - sensor.ha_uptime
          - type: section
          - sensor.external_ip

      - type: horizontal-stack
        cards:
          - entity: sensor.processor_use
            type: gauge
            name: CPU
          - entity: sensor.memory_use_percent
            type: gauge
            name: RAM
          - entity: sensor.disk_use_percent_config
            type: gauge
            name: Disk

  - type: vertical-stack
    cards:
      - type: custom:mini-graph-card
        name: Speedtest
        icon: mdi:speedometer
        # hours_to_show: 168
        lower_bound: 0
        upper_bound: 1000
        lower_bound_secondary: 0
        upper_bound_secondary: 500
        show:
          fill: false
        entities:
          - entity: sensor.speedtest_download
            name: Download
            color: "#6afff3"
          - entity: sensor.speedtest_upload
            name: Upload
            color: "#bf71ff"
          - entity: sensor.speedtest_ping
            y_axis: secondary
            name: Ping
            color: red

      - type: custom:button-card
        template: common
        lock: true
        icon: mdi:cloud-download-outline
        name: Test Now
        styles:
          icon:
            - width: 100%
        tap_action:
          action: call-service
          service: speedtestdotnet.speedtest
        state:
          - value: 'on'
            styles:
              icon:
                - color: var(--paper-green-400)

  - type: vertical-stack
    cards:

      - type: entities
        title: Database Info
        show_header_toggle: false
        entities:
          - sensor.table_size_states
          - sensor.table_size_events
          - sensor.table_size_recorder_runs
          - sensor.table_size_schema_changes
          - type: section
          - sensor.database_size
          - type: section
          - input_number.sql_purge_keep

      - type: custom:button-card
        template: common
        lock: true
        entity: script.sql_purge
        icon: mdi:delete-variant
        name: Purge DB
        styles:
          icon:
            - width: 100%
        state:
          - value: 'on'
            styles:
              icon:
                - color: var(--paper-green-400)

  - type: custom:monster-card
    show_empty: true
    card:
      type: entities
      title: Battery Levels
      show_header_toggle: false
    filter:
      include:
        - entity_id: '*battery_level'

  - type: entities
    title: Configuration
    show_header_toggle: false
    entities:
      - input_boolean.toggle_automation
      - input_boolean.toggle_script
      - input_boolean.toggle_zwave
      - input_boolean.toggle_zha

  - type: custom:monster-card
    card:
      type: entities
      title: Automation
      show_header_toggle: false
    filter:
      include:
        - domain: automation
    when:
      entity: input_boolean.toggle_automation
      state: "on"

  - type: custom:monster-card
    card:
      type: entities
      title: Scripts
      show_header_toggle: false
    filter:
      include:
        - domain: script
    when:
      entity: input_boolean.toggle_script
      state: "on"

  - type: custom:monster-card
    card:
      type: entities
      title: ZWave
      show_header_toggle: false
    filter:
      include:
        - domain: zwave
    when:
      entity: input_boolean.toggle_zwave
      state: "on"

  - type: custom:monster-card
    card:
      type: entities
      title: Zigbee
      show_header_toggle: false
    filter:
      include:
        - domain: zha
    when:
      entity: input_boolean.toggle_zha
      state: "on"
